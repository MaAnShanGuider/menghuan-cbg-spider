## 记录问题


#### 登录接口


```js

		if (s._$getSmState() && b[d]) a.data = {
					encParams: s._$sm4Encrypt(a.data)
				};


	h._$sm4Encrypt = function (e) {
			return window.URSSM4.encrypt(JSON.stringify(e), x)
		};

```

```js
channel: 0
pd: "cbg"
pkht: "cbg.163.com"
pkid: "aqpOBwV"
rtid: "fsr6dLf7KD158EnORjaqTW0XHsuvOVNF"
topURL: "https://xyq-m.cbg.163.com/cgi/mweb/show_login?back_url=%2Fcgi%2Fmweb%2Flogin%2Farea%3Fback_url%3Dhttps%253A%252F%252Fxyq-m.cbg.163.com%252Fcgi%252Fmweb%252Fuser%253F_mobile_tips%253D1"
```
找到pkid 和 rtid，那么那个en什么的，就算ok了

```
__loadConfig

window._$PKID
window._$RTID

```
至于`_$TOPURL`，写死就行了

```js
//  _$RTID的生成方法
 function () {
	var e = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
		t = 32,
		i = [];
	for (; t-- > 0;) i[t] = e.charAt(Math.random() * e.length);
	return i.join("")
	}
```
那剩下的，就只有`._$PKID`


下面这个涉及到密码

也是奇了怪了，登录的时候，密码的字段不知道怎么到哪里去了，
希望下面这个能够给点线索！


```js
	v.__doRegReal = function () {
			this.__onDoLockReg();
			if (this.__collect) this._events = this.__collect._$getEvents();
			var e = this.__registerModule._$getValues();
			this.__username = e[0].trim();
			this.__password = e[1];
			this.__smscode = e[2];
			if (this.__pass) {
				var t = {
					un: this.__username,
					pw: MP.encrypt(this.__password, this.__username),
					events: JSON.stringify(this._events),
					channel: 2,
					pd: this.__product,
					pkid: this.__promark
				};
				s._$request("getTicket", t, this.__getTicket._$bind(this), this.__getTicketException._$bind(this));
			}
		};
```

```js
	var s = this.$refs.mninput._$getValue().trim();
	if (n._$getSmState()) e.un = s;
	else e.mb = s;
	e.sms = this.$refs.smsinput._$getValue().trim();
	if (this.$refs.mpinput) e.pw = MP.encrypt(this.$refs.mpinput._$getValue(), s);
```

```js
{
3646: function (e, t, i) {
				var n = i(7228);
				e.exports = function (e) {
					if (Array.isArray(e)) return n(e)
				},
					e.exports["default"] = e.exports,
					e.exports.__esModule = !0
			},
7228: function (e) {
	e.exports = function (e, t) {
		(null == t || t > e.length) && (t = e.length);
		for (var i = 0,
			n = new Array(t); i < t; i++) n[i] = e[i];
		return n
	},
		e.exports["default"] = e.exports,
		e.exports.__esModule = !0
},
}



```
## 网易的流程

### 一、 开始会请求 [get]:
```
https://xyq-m.cbg.163.com/cgi/api/get_login_info?page_session_id=0181A568-B05F-1805-FFCC-1AAAA1345137&_=1656337561716

```
- `page_session_id`: 就用那个生成的
- `_`: 就是时间戳

一般地，这个会返回:
```
	{"msg": "urs not login", "status": 2, "status_code": "SESSION_TIMEOUT"}

```
即，用户未登录。

### 二、初始化数据[post]

#### URL
```
https://dl.reg.163.com/dl/zj/mail/ini

```
#### 参数
```
{"encParams":"e7a3d4c8fe98587c99be7f282b26cf006d65c51b439ccae8f652efecdba169ab0a6d30ac13ad5029c570494d34a1771ab6d3154c6e57ac48c09370303ea6760afcd4b3793b5525952aad1f4b3c2266fc14264324eb456e0e4f1a92f8ed88b2b4f2af001d3aa138bf6635df14f21b249e63978af0fa8ccc979159725d8343a2066ebd0feb296a28ee4c881ac78f02ab48ee0b674a22fedf636382f832abfa73ea073e0a17dd0a5b69c1b2811b195fd37cbef71733432786f47e74546b89760b7027a47a476d9442c49e1dc8d3521b482f2c4b141852750e288020d5f9a75b108ede632619e4e16cc634f98057091579d3"}

```

#### response
```
{"ret":"201","capFlag":0,"watchman":0,"capId":""}
```